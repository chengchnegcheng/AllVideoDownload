# AVD Webç‰ˆæœ¬å¼€å‘æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

AVD Webç‰ˆæœ¬æ˜¯åŸºäºåŸæœ‰æ¡Œé¢ç‰ˆæœ¬é‡æ–°è®¾è®¡çš„Webç«¯å…¨èƒ½è§†é¢‘ä¸‹è½½å™¨ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæä¾›ç°ä»£åŒ–çš„ç”¨æˆ·ç•Œé¢å’Œå¼ºå¤§çš„åŠŸèƒ½æ”¯æŒã€‚

### æ ¸å¿ƒç‰¹æ€§

- ğŸŒ **Webç«¯ç•Œé¢**ï¼šåŸºäºReact + Ant Designçš„ç°ä»£åŒ–å“åº”å¼ç•Œé¢
- ğŸš€ **é«˜æ€§èƒ½åç«¯**ï¼šåŸºäºFastAPIçš„å¼‚æ­¥Pythonåç«¯æœåŠ¡
- ğŸ“± **è·¨å¹³å°æ”¯æŒ**ï¼šæ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼Œå…¼å®¹ç§»åŠ¨ç«¯
- âš¡ **å®æ—¶æ›´æ–°**ï¼šWebSocketå®æ—¶æ¨é€ä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€
- ğŸ¬ **å¤šå¹³å°ä¸‹è½½**ï¼šæ”¯æŒYouTubeã€Bilibiliã€Twitterç­‰ä¸»æµå¹³å°
- ğŸ”Š **æ™ºèƒ½å­—å¹•**ï¼šAIé©±åŠ¨çš„å­—å¹•ç”Ÿæˆå’Œå¤šè¯­è¨€ç¿»è¯‘
- ğŸ“Š **å¯è§†åŒ–ä»ªè¡¨ç›˜**ï¼šå®æ—¶ç›‘æ§ç³»ç»ŸçŠ¶æ€å’Œä¸‹è½½ç»Ÿè®¡
- ğŸ” **ä¼šè¯ç®¡ç†**ï¼šæ”¯æŒç½‘ç«™ç™»å½•çŠ¶æ€ä¿å­˜
- ğŸ¨ **ä¸»é¢˜ç³»ç»Ÿ**ï¼šæ”¯æŒäº®è‰²/æš—è‰²ä¸»é¢˜åˆ‡æ¢

## æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å‰ç«¯ (React)   â”‚    â”‚  åç«¯ (FastAPI)  â”‚    â”‚   æ•°æ®å­˜å‚¨å±‚     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ - React 18      â”‚    â”‚ - FastAPI       â”‚    â”‚ - SQLite/MySQL  â”‚
â”‚ - Ant Design    â”‚â—„â”€â”€â–ºâ”‚ - SQLAlchemy    â”‚â—„â”€â”€â–ºâ”‚ - Redis (ç¼“å­˜)  â”‚
â”‚ - TypeScript    â”‚    â”‚ - WebSocket     â”‚    â”‚ - æ–‡ä»¶ç³»ç»Ÿ      â”‚
â”‚ - Vite          â”‚    â”‚ - Async/Await   â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    å¤–éƒ¨æœåŠ¡     â”‚
                    â”‚                 â”‚
                    â”‚ - yt-dlp        â”‚
                    â”‚ - faster-whisper â”‚
                    â”‚ - FFmpeg        â”‚
                    â”‚ - Selenium      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆè¯¦æƒ…

#### å‰ç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: React 18 + TypeScript
- **UIåº“**: Ant Design 5.x
- **æ„å»ºå·¥å…·**: Vite
- **çŠ¶æ€ç®¡ç†**: Zustand
- **è·¯ç”±**: React Router v6
- **HTTPå®¢æˆ·ç«¯**: ç»Ÿä¸€APIå·¥å…·ç³»ç»Ÿ (åŸºäºfetch)
- **å®æ—¶é€šä¿¡**: WebSocket API
- **å·¥å…·åº“**: dayjs, lodash-es, ahooks
- **APIç®¡ç†**: ç»Ÿä¸€é…ç½®åŒ–APIç«¯ç‚¹ç®¡ç†
- **é”™è¯¯å¤„ç†**: åˆ†å±‚é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½æç¤º
- **æ€§èƒ½ä¼˜åŒ–**: æ™ºèƒ½ç¼“å­˜ã€é‡è¯•æœºåˆ¶ã€æ‰¹é‡è¯·æ±‚
- **ç½‘ç»œç›‘æ§**: å®æ—¶ç½‘ç»œçŠ¶æ€æ£€æµ‹å’Œæ¢å¤

#### åç«¯æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: FastAPI + Python 3.8+
- **å¼‚æ­¥**: asyncio + uvicorn
- **æ•°æ®åº“**: SQLAlchemy 2.0 (æ”¯æŒSQLite/MySQL/PostgreSQL)
- **æ•°æ®éªŒè¯**: Pydantic v2
- **è§†é¢‘ä¸‹è½½**: yt-dlp
- **AIæ¨¡å‹**: faster-whisper + transformers
- **åª’ä½“å¤„ç†**: FFmpeg + ffmpeg-python
- **æµè§ˆå™¨è‡ªåŠ¨åŒ–**: Selenium
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery + Redis (å¯é€‰)

## é¡¹ç›®ç»“æ„

```
AVD-Web/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ main.py                # åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”‚   â”œâ”€â”€ .env                   # ç¯å¢ƒå˜é‡é…ç½®
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ routers/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ downloads.py      # ä¸‹è½½ç›¸å…³API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ subtitles.py      # å­—å¹•ç›¸å…³API
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py           # è®¤è¯API
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ system.py         # ç³»ç»ŸAPI
â”‚   â”‚   â”‚   â””â”€â”€ dependencies.py       # ä¾èµ–æ³¨å…¥
â”‚   â”‚   â”œâ”€â”€ core/              # æ ¸å¿ƒæ¨¡å—
â”‚   â”‚   â”‚   â”œâ”€â”€ config.py             # é…ç½®ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py           # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ downloader.py         # ä¸‹è½½å¼•æ“
â”‚   â”‚   â”‚   â”œâ”€â”€ subtitle_processor.py # å­—å¹•å¤„ç†
â”‚   â”‚   â”‚   â””â”€â”€ websocket_manager.py  # WebSocketç®¡ç†
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ downloads.py          # ä¸‹è½½ä»»åŠ¡æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ users.py              # ç”¨æˆ·æ¨¡å‹
â”‚   â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚       â”œâ”€â”€ logger.py             # æ—¥å¿—å·¥å…·
â”‚   â”‚       â”œâ”€â”€ validators.py         # éªŒè¯å·¥å…·
â”‚   â”‚       â””â”€â”€ file_utils.py         # æ–‡ä»¶å·¥å…·
â”‚   â””â”€â”€ data/                  # æ•°æ®ç›®å½•
â”‚       â”œâ”€â”€ downloads/         # ä¸‹è½½æ–‡ä»¶
â”‚       â”œâ”€â”€ models/            # AIæ¨¡å‹ç¼“å­˜
â”‚       â”œâ”€â”€ logs/              # æ—¥å¿—æ–‡ä»¶
â”‚       â””â”€â”€ cookies/           # Cookieå­˜å‚¨
â”œâ”€â”€ frontend/                  # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ main.tsx           # åº”ç”¨å…¥å£
â”‚   â”‚   â”œâ”€â”€ config/            # é…ç½®ç®¡ç† (NEW)
â”‚   â”‚   â”‚   â””â”€â”€ api.ts                # ç»Ÿä¸€APIé…ç½®ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ components/        # ç»„ä»¶åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ DownloadProgress.tsx  # ä¸‹è½½è¿›åº¦ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ VideoPreview.tsx      # è§†é¢‘é¢„è§ˆç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ TaskList.tsx          # ä»»åŠ¡åˆ—è¡¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SubtitlePage.tsx      # å­—å¹•å¤„ç†é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ AISettings.tsx        # AIè®¾ç½®ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ SystemInfoPage.tsx    # ç³»ç»Ÿä¿¡æ¯é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ NetworkSettings.tsx   # ç½‘ç»œè®¾ç½®ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ LogsPage.tsx          # æ—¥å¿—ç®¡ç†é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ HistoryPage.tsx       # å†å²è®°å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ hooks/             # React Hooks
â”‚   â”‚   â”‚   â”œâ”€â”€ useWebSocket.ts       # WebSocket Hook
â”‚   â”‚   â”‚   â”œâ”€â”€ useDownload.ts        # ä¸‹è½½Hook (å·²é€‚é…)
â”‚   â”‚   â”‚   â”œâ”€â”€ useTheme.ts           # ä¸»é¢˜Hook
â”‚   â”‚   â”‚   â”œâ”€â”€ useErrorHandler.ts    # é”™è¯¯å¤„ç†Hook (NEW)
â”‚   â”‚   â”‚   â””â”€â”€ useSystemSettings.ts  # ç³»ç»Ÿè®¾ç½®Hook
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°åº“
â”‚   â”‚   â”‚   â”œâ”€â”€ apiUtils.ts           # é«˜çº§APIå·¥å…·é›† (NEW)
â”‚   â”‚   â”‚   â”œâ”€â”€ format.ts             # æ ¼å¼åŒ–å·¥å…·
â”‚   â”‚   â”‚   â””â”€â”€ constants.ts          # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ types/             # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â”‚   â”œâ”€â”€ download.ts           # ä¸‹è½½ç›¸å…³ç±»å‹
â”‚   â”‚   â”‚   â””â”€â”€ api.ts                # APIç›¸å…³ç±»å‹
â”‚   â”‚   â””â”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ App.css
â”‚   â”‚       â””â”€â”€ variables.css
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ API.md                 # APIæ¥å£æ–‡æ¡£
â”‚   â”œâ”€â”€ DEPLOYMENT.md          # éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ USER_GUIDE.md          # ç”¨æˆ·æ‰‹å†Œ
â”œâ”€â”€ docker/                    # Dockeré…ç½®
â”‚   â”œâ”€â”€ Dockerfile.backend     # åç«¯Dockerfile
â”‚   â”œâ”€â”€ Dockerfile.frontend    # å‰ç«¯Dockerfile
â”‚   â””â”€â”€ docker-compose.yml     # Docker Composeé…ç½®
â”œâ”€â”€ scripts/                   # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ setup.sh               # ç¯å¢ƒå®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ build.sh               # æ„å»ºè„šæœ¬
â”‚   â””â”€â”€ deploy.sh              # éƒ¨ç½²è„šæœ¬
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. ä¸‹è½½å¼•æ“æ¨¡å—

**ä½ç½®**: `backend/src/core/downloader.py`

**åŠŸèƒ½**:
- å¤šå¹³å°è§†é¢‘ä¿¡æ¯æå–
- å¹¶å‘ä¸‹è½½ç®¡ç†
- å®æ—¶è¿›åº¦æ¨é€
- ä¸‹è½½ä»»åŠ¡é˜Ÿåˆ—
- é”™è¯¯å¤„ç†å’Œé‡è¯•
- æµå¼ä¸‹è½½ (ç›´æ¥ä¼ è¾“åˆ°å®¢æˆ·ç«¯)

**å…³é”®ç±»**:
```python
class VideoDownloader:
    async def get_video_info(self, url: str) -> VideoInfo
    async def download(self, url: str, options: DownloadOptions) -> DownloadResult
    async def cancel_download(self, task_id: str)
    async def get_direct_download_url(self, url: str, options: DownloadOptions) -> Dict[str, Any]
    async def stream_download(self, download_url: str, headers: Dict[str, str] = None) -> AsyncGenerator[bytes, None]
```

**æµå¼ä¸‹è½½ç‰¹æ€§**:
- ğŸ“± **ç›´æ¥ä¼ è¾“**: è§†é¢‘æ•°æ®ç›´æ¥ä¼ è¾“åˆ°å®¢æˆ·ç«¯ï¼Œä¸åœ¨æœåŠ¡å™¨å­˜å‚¨
- ğŸ’¾ **èŠ‚çœç©ºé—´**: æœåŠ¡å™¨æ— éœ€å­˜å‚¨å¤§é‡è§†é¢‘æ–‡ä»¶
- âš¡ **æé«˜é€Ÿåº¦**: å‡å°‘ä¸­é—´ç¯èŠ‚ï¼Œæå‡ä¸‹è½½é€Ÿåº¦
- ğŸ” **æ›´å¥½éšç§**: è§†é¢‘æ–‡ä»¶ä¸åœ¨æœåŠ¡å™¨ç•™å­˜
- ğŸ“Š **å®æ—¶è¿›åº¦**: æ”¯æŒæµå¼ä¸‹è½½è¿›åº¦ç›‘æ§
- ğŸ”„ **é”™è¯¯å¤„ç†**: å®Œå–„çš„ç½‘ç»œé”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

### 2. å­—å¹•å¤„ç†æ¨¡å—

**ä½ç½®**: `backend/src/core/subtitle_processor.py`

**åŠŸèƒ½**:
- AIè¯­éŸ³è½¬æ–‡å­— (faster-whisper)
- å¤šè¯­è¨€å­—å¹•ç¿»è¯‘
- SRTæ ¼å¼å¤„ç†
- å­—å¹•çƒ§å½•åˆ°è§†é¢‘

**å…³é”®åŠŸèƒ½**:

#### å­—å¹•ç”Ÿæˆ
```python
async def generate_subtitles(
    video_path: str,
    language: str = "auto", 
    model_size: str = "base"
) -> Dict[str, Any]
```

#### å­—å¹•ç¿»è¯‘
```python
async def translate_subtitles(
    subtitle_path: str,
    source_language: str = "auto",
    target_language: str = "en"
) -> Dict[str, Any]
```

#### å­—å¹•çƒ§å½•
```python
async def burn_subtitles(
    video_path: str,
    subtitle_path: str,
    output_path: Optional[str] = None,
    style_options: Optional[Dict] = None
) -> Dict[str, Any]
```

**å­—å¹•çƒ§å½•ç‰¹æ€§**:
- æ”¯æŒè‡ªå®šä¹‰å­—å¹•æ ·å¼ (å­—ä½“ã€é¢œè‰²ã€å¤§å°ã€ä½ç½®)
- å¤šç§æ ·å¼é¢„è®¾ (é»˜è®¤ã€å¤§å­—ä½“ã€é»„è‰²ã€ä¼˜é›…ç­‰)
- å¯è°ƒèŠ‚è¾“å‡ºè§†é¢‘è´¨é‡ (ä½/ä¸­/é«˜)
- æ”¯æŒä¿ç•™åŸå§‹è§†é¢‘æ–‡ä»¶é€‰é¡¹
- å®æ—¶çƒ§å½•è¿›åº¦ç›‘æ§
- FFmpegç¡¬ä»¶åŠ é€Ÿæ”¯æŒ

### 3. WebSocketç®¡ç†æ¨¡å—

**ä½ç½®**: `backend/src/core/websocket_manager.py`

**åŠŸèƒ½**:
- è¿æ¥ç®¡ç†
- å®æ—¶è¿›åº¦æ¨é€
- çŠ¶æ€åŒæ­¥
- é”™è¯¯é€šçŸ¥

### 4. ç»Ÿä¸€APIç®¡ç†ç³»ç»Ÿ â­ NEW

**ä½ç½®**: `frontend/src/config/api.ts` + `frontend/src/utils/apiUtils.ts`

**æ ¸å¿ƒåŠŸèƒ½**:
- ğŸ—ï¸ **ç»Ÿä¸€é…ç½®ç®¡ç†**: æ‰€æœ‰APIç«¯ç‚¹é›†ä¸­é…ç½®ï¼Œæ˜“äºç»´æŠ¤
- ğŸ“¦ **æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ**: è‡ªåŠ¨ç¼“å­˜GETè¯·æ±‚ï¼Œå¯é…ç½®ç¼“å­˜æ—¶é—´
- ğŸ”„ **è‡ªåŠ¨é‡è¯•æœºåˆ¶**: æŒ‡æ•°é€€é¿é‡è¯•ï¼Œæœ€å¤š3æ¬¡é‡è¯•
- ğŸš¨ **åˆ†å±‚é”™è¯¯å¤„ç†**: APIå±‚/ä¸šåŠ¡å±‚/UIå±‚é”™è¯¯å¤„ç†
- ğŸŒ **ç½‘ç»œçŠ¶æ€ç›‘æ§**: å®æ—¶æ£€æµ‹ç½‘ç»œçŠ¶æ€ï¼Œæ–­çº¿è‡ªåŠ¨æ¢å¤
- âš¡ **æ‰¹é‡è¯·æ±‚ä¼˜åŒ–**: å¹¶å‘æ§åˆ¶ï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½
- ğŸ”” **ç”¨æˆ·å‹å¥½æç¤º**: è‡ªåŠ¨æ˜¾ç¤ºé”™è¯¯é€šçŸ¥å’Œè§£å†³å»ºè®®

**å…³é”®ç‰¹æ€§**:
```typescript
// ç»Ÿä¸€APIé…ç½®
export const API_ENDPOINTS = {
  SYSTEM: { INFO: '/api/v1/system/info', ... },
  DOWNLOADS: { PLATFORMS: '/api/v1/downloads/platforms', ... },
  SUBTITLES: { UPLOAD: '/api/v1/subtitles/upload', ... }
};

// é«˜çº§APIå·¥å…·
export const apiGet = <T>(endpoint: string, options?: RequestOptions) => Promise<ApiResponse<T>>;
export const apiPost = <T>(endpoint: string, data?: any) => Promise<ApiResponse<T>>;
export const apiBatch = <T>(requests: RequestBatch[]) => Promise<ApiResponse<T>[]>;
```

### 5. å‰ç«¯çŠ¶æ€ç®¡ç†

**ä½ç½®**: `frontend/src/hooks/`

**åŠŸèƒ½**:
- ä¸‹è½½çŠ¶æ€ç®¡ç† (å·²é€‚é…æ–°API)
- WebSocketè¿æ¥ç®¡ç†
- ä¸»é¢˜çŠ¶æ€ç®¡ç†
- æ•°æ®ç¼“å­˜ (é›†æˆAPIç¼“å­˜)
- æµå¼ä¸‹è½½å¤„ç†
- å…¨å±€é”™è¯¯å¤„ç† (æ–°å¢)
- ç”¨æˆ·è®¾ç½®ç®¡ç†
- ç³»ç»Ÿè®¾ç½®ç®¡ç† (æ–°å¢)
- ç½‘ç»œçŠ¶æ€ç›‘æ§ (æ–°å¢)

**æ–°å¢åŠŸèƒ½æ¨¡å—**:

#### é”™è¯¯å¤„ç†ç³»ç»Ÿ (`useErrorHandler.ts`)
- ğŸš¨ **ç»Ÿä¸€é”™è¯¯å¤„ç†**: å…¨å±€APIé”™è¯¯å¤„ç†æœºåˆ¶
- ğŸ“Š **æ™ºèƒ½é”™è¯¯åˆ†ç±»**: æ ¹æ®HTTPçŠ¶æ€ç è‡ªåŠ¨åˆ†ç±»é”™è¯¯
- ğŸ’¬ **ç”¨æˆ·å‹å¥½æç¤º**: å°†æŠ€æœ¯é”™è¯¯è½¬æ¢ä¸ºç”¨æˆ·å¯ç†è§£çš„æ¶ˆæ¯
- ğŸ“ **é”™è¯¯æ—¥å¿—è®°å½•**: è‡ªåŠ¨è®°å½•é”™è¯¯è¯¦æƒ…ç”¨äºè°ƒè¯•
- ğŸ”„ **é”™è¯¯æ¢å¤å»ºè®®**: ä¸ºç”¨æˆ·æä¾›è§£å†³æ–¹æ¡ˆ

#### ç”¨æˆ·è®¾ç½®ç³»ç»Ÿ (`useSettings.ts`)
- âš™ï¸ **ä¸ªæ€§åŒ–é…ç½®**: æ”¯æŒä¸‹è½½ã€ç•Œé¢ã€è¡Œä¸ºç­‰å¤šç»´åº¦è®¾ç½®
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**: è®¾ç½®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œæ— éœ€æœåŠ¡å™¨
- ğŸ“¤ **è®¾ç½®å¯¼å…¥å¯¼å‡º**: æ”¯æŒè®¾ç½®æ–‡ä»¶çš„å¤‡ä»½å’Œæ¢å¤
- ğŸ¨ **ä¸»é¢˜è‡ªåŠ¨åˆ‡æ¢**: æ”¯æŒæ˜æš—ä¸»é¢˜è‡ªåŠ¨è·Ÿéšç³»ç»Ÿ
- ğŸ”„ **å‘åå…¼å®¹**: æ–°ç‰ˆæœ¬è‡ªåŠ¨å…¼å®¹æ—§ç‰ˆæœ¬è®¾ç½®

#### æ‰¹é‡ä¸‹è½½åŠŸèƒ½
- ğŸ“ **æ‰¹é‡URLè¾“å…¥**: æ”¯æŒå¤šè¡ŒURLåŒæ—¶æäº¤
- ğŸ”¢ **å¹¶å‘æ§åˆ¶**: æ™ºèƒ½æ§åˆ¶å¹¶å‘æ•°é‡ï¼Œé¿å…æœåŠ¡å™¨è¿‡è½½
- ğŸ“Š **æ‰¹é‡è¿›åº¦ç›‘æ§**: å®æ—¶æ˜¾ç¤ºæ‰¹é‡ä»»åŠ¡çš„æ•´ä½“è¿›åº¦
- âš¡ **æ™ºèƒ½é˜Ÿåˆ—**: å¤±è´¥ä»»åŠ¡è‡ªåŠ¨é‡è¯•ï¼ŒæˆåŠŸä»»åŠ¡åŠæ—¶åé¦ˆ
- ğŸ¯ **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡æš‚åœã€å–æ¶ˆã€åˆ é™¤ç­‰æ“ä½œ

**æµå¼ä¸‹è½½ç•Œé¢åŠŸèƒ½**:
- ğŸ”„ **ä¸‹è½½æ¨¡å¼åˆ‡æ¢**: æ”¯æŒ"æœåŠ¡å™¨ä¸‹è½½"å’Œ"ç›´æ¥ä¸‹è½½"ä¸¤ç§æ¨¡å¼
- ğŸ“Š **å®æ—¶è¿›åº¦**: æµå¼ä¸‹è½½è¿‡ç¨‹ä¸­çš„å®æ—¶è¿›åº¦æ˜¾ç¤º
- ğŸ’» **å®¢æˆ·ç«¯å­˜å‚¨**: ç›´æ¥ä¸‹è½½åˆ°ç”¨æˆ·çš„ä¸‹è½½ç›®å½•
- ğŸ¯ **æ™ºèƒ½æ–‡ä»¶å**: è‡ªåŠ¨å¤„ç†ä¸­æ–‡å’Œç‰¹æ®Šå­—ç¬¦çš„æ–‡ä»¶å
- âš¡ **å¿«é€Ÿå“åº”**: æ— éœ€ç­‰å¾…æœåŠ¡å™¨å¤„ç†ï¼Œç«‹å³å¼€å§‹ä¼ è¾“

**æ€§èƒ½ä¼˜åŒ–ç‰¹æ€§**:
- ğŸš€ **ç»„ä»¶æ‡’åŠ è½½**: ä½¿ç”¨React.lazy()å®ç°æŒ‰éœ€åŠ è½½
- ğŸ›¡ï¸ **é”™è¯¯è¾¹ç•Œ**: ErrorBoundaryç»„ä»¶é˜²æ­¢é¡µé¢å´©æºƒ
- ğŸ“¦ **ä»£ç åˆ†å‰²**: å„é¡µé¢ç»„ä»¶ç‹¬ç«‹æ‰“åŒ…ï¼Œå‡å°‘é¦–é¡µåŠ è½½æ—¶é—´
- ğŸ”„ **SuspenseåŒ…è£…**: ä¼˜é›…çš„åŠ è½½çŠ¶æ€æ˜¾ç¤º
- ğŸ’¾ **å†…å­˜ä¼˜åŒ–**: å‡å°‘ä¸å¿…è¦çš„é‡æ¸²æŸ“å’Œå†…å­˜æ³„æ¼

## APIæ¥å£è®¾è®¡

### ç»Ÿä¸€APIæ¶æ„ â­ v2.0.0

**è®¾è®¡åŸåˆ™**:
- ğŸ“‹ **é…ç½®åŒ–ç®¡ç†**: æ‰€æœ‰ç«¯ç‚¹åœ¨å‰ç«¯ç»Ÿä¸€é…ç½®
- ğŸ”„ **å‘åå…¼å®¹**: ä¿æŒAPI v1ç‰ˆæœ¬ï¼Œç¡®ä¿å…¼å®¹æ€§
- ğŸ›¡ï¸ **ä¼˜é›…é™çº§**: ä¸å­˜åœ¨çš„ç«¯ç‚¹è‡ªåŠ¨é™çº§å¤„ç†
- ğŸ“Š **æ™ºèƒ½ç¼“å­˜**: æ ¹æ®æ•°æ®ç‰¹æ€§è‡ªåŠ¨ç¼“å­˜ç­–ç•¥

### å‰ç«¯APIé…ç½®ç»“æ„

```typescript
export const API_ENDPOINTS = {
  // ç³»ç»Ÿç›¸å…³ - é•¿æœŸç¼“å­˜ (10åˆ†é’Ÿ)
  SYSTEM: {
    INFO: '/api/v1/system/info',
    CONFIG: '/api/v1/system/config', 
    HEALTH: '/health'
  },
  
  // ä¸‹è½½ç›¸å…³ - çŸ­æœŸç¼“å­˜ (30ç§’)
  DOWNLOADS: {
    PLATFORMS: '/api/v1/downloads/platforms',
    QUALITY_OPTIONS: '/api/v1/downloads/quality-options',
    INFO: '/api/v1/downloads/info',
    STREAM: '/api/v1/downloads/stream',
    RECORDS: '/api/v1/downloads/records',
    RECORD: '/api/v1/downloads/record'
  },
  
  // å­—å¹•ç›¸å…³ - æ™ºèƒ½ç¼“å­˜
  SUBTITLES: {
    ROOT: '/api/v1/subtitles/',
    LANGUAGES: '/api/v1/subtitles/info/languages',
    UPLOAD: '/api/v1/subtitles/upload',
    PROCESS: '/api/v1/subtitles/process',
    BURN: '/api/v1/subtitles/burn',
    AI_SETTINGS: '/api/v1/subtitles/ai-settings/models',
    CANCEL_TASK: '/api/v1/subtitles/cancel-task'
  }
};
```

### RESTful APIç«¯ç‚¹

#### ä¸‹è½½ç›¸å…³æ¥å£

```http
GET  /api/v1/downloads/platforms          # è·å–æ”¯æŒçš„å¹³å° âœ…
POST /api/v1/downloads/info               # è·å–è§†é¢‘ä¿¡æ¯ âœ…
POST /api/v1/downloads/stream             # æµå¼ä¸‹è½½ (ç›´æ¥ä¼ è¾“) âœ…
GET  /api/v1/downloads/records            # è·å–ä¸‹è½½è®°å½• âœ…
POST /api/v1/downloads/record             # åˆ›å»ºä¸‹è½½è®°å½• âœ…
GET  /api/v1/downloads/quality-options    # è·å–è´¨é‡é€‰é¡¹ âœ…
```

#### å­—å¹•ç›¸å…³æ¥å£

```http
GET  /api/v1/subtitles/                   # å­—å¹•ç³»ç»Ÿä¿¡æ¯ âœ…
GET  /api/v1/subtitles/info/languages     # æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ âœ…
POST /api/v1/subtitles/upload             # ä¸Šä¼ æ–‡ä»¶ âœ…
POST /api/v1/subtitles/process            # æµå¼å­—å¹•å¤„ç† âœ…
POST /api/v1/subtitles/burn               # çƒ§å½•å­—å¹•åˆ°è§†é¢‘ âœ…
GET  /api/v1/subtitles/ai-settings/models # AIæ¨¡å‹é…ç½® âœ…
POST /api/v1/subtitles/cancel-task        # å–æ¶ˆä»»åŠ¡ âœ…
```

#### ç³»ç»Ÿæ¥å£

```http
GET  /api/v1/system/info                  # ç³»ç»Ÿä¿¡æ¯ âœ…
GET  /api/v1/system/config                # ç³»ç»Ÿé…ç½® âœ…
GET  /health                              # å¥åº·æ£€æŸ¥ âœ…
```

#### æ–‡ä»¶è®¿é—®è·¯å¾„

```http
# æ–°çš„ç»Ÿä¸€è®¿é—®è·¯å¾„ (æ¨è)
GET  /files/{filename}                    # ç»Ÿä¸€æ–‡ä»¶è®¿é—®

# å‘åå…¼å®¹è·¯å¾„
GET  /uploads/{filename}                  # ä¸Šä¼ æ–‡ä»¶è®¿é—®
GET  /downloads/{filename}                # ä¸‹è½½æ–‡ä»¶è®¿é—®
```

### WebSocket API

**è¿æ¥åœ°å€**: `ws://localhost:8000/ws`

**æ¶ˆæ¯æ ¼å¼**:
```json
{
  "type": "download_progress",
  "task_id": "uuid",
  "data": {
    "progress": 50.5,
    "speed": 1024000,
    "eta": 120
  }
}
```

**æ¶ˆæ¯ç±»å‹**:
- `download_progress`: ä¸‹è½½è¿›åº¦æ›´æ–°
- `download_completed`: ä¸‹è½½å®Œæˆ
- `download_failed`: ä¸‹è½½å¤±è´¥
- `subtitle_progress`: å­—å¹•å¤„ç†è¿›åº¦
- `system_notification`: ç³»ç»Ÿé€šçŸ¥

## æ•°æ®åº“è®¾è®¡

### ä¸»è¦è¡¨ç»“æ„

#### download_tasks (ä¸‹è½½ä»»åŠ¡è¡¨)
```sql
CREATE TABLE download_tasks (
    id VARCHAR(36) PRIMARY KEY,           -- UUID
    url TEXT NOT NULL,                    -- è§†é¢‘URL
    title VARCHAR(500),                   -- è§†é¢‘æ ‡é¢˜
    platform VARCHAR(50),                -- å¹³å°åç§°
    quality VARCHAR(20) DEFAULT 'best',  -- ä¸‹è½½è´¨é‡
    format VARCHAR(20) DEFAULT 'mp4',    -- è§†é¢‘æ ¼å¼
    status ENUM(...) DEFAULT 'pending',  -- ä»»åŠ¡çŠ¶æ€
    progress FLOAT DEFAULT 0.0,          -- è¿›åº¦ç™¾åˆ†æ¯”
    file_path TEXT,                       -- æ–‡ä»¶è·¯å¾„
    file_size BIGINT DEFAULT 0,          -- æ–‡ä»¶å¤§å°
    downloaded_size BIGINT DEFAULT 0,    -- å·²ä¸‹è½½å¤§å°
    download_speed FLOAT DEFAULT 0.0,    -- ä¸‹è½½é€Ÿåº¦
    created_at TIMESTAMP DEFAULT NOW(),  -- åˆ›å»ºæ—¶é—´
    completed_at TIMESTAMP,              -- å®Œæˆæ—¶é—´
    error_message TEXT                    -- é”™è¯¯ä¿¡æ¯
);
```

#### subtitle_tasks (å­—å¹•ä»»åŠ¡è¡¨)
```sql
CREATE TABLE subtitle_tasks (
    id VARCHAR(36) PRIMARY KEY,
    download_task_id VARCHAR(36),        -- å…³è”ä¸‹è½½ä»»åŠ¡
    source_file TEXT NOT NULL,          -- æºæ–‡ä»¶è·¯å¾„
    task_type VARCHAR(20) NOT NULL,     -- generate/translate/burn
    source_language VARCHAR(10),        -- æºè¯­è¨€
    target_language VARCHAR(10),        -- ç›®æ ‡è¯­è¨€
    status ENUM(...) DEFAULT 'pending',
    output_file TEXT,                    -- è¾“å‡ºæ–‡ä»¶è·¯å¾„
    
    -- å­—å¹•çƒ§å½•ç›¸å…³å­—æ®µ
    video_file_path VARCHAR(500),       -- è§†é¢‘æ–‡ä»¶è·¯å¾„
    subtitle_file_path VARCHAR(500),    -- å­—å¹•æ–‡ä»¶è·¯å¾„
    burn_style_options TEXT,            -- å­—å¹•æ ·å¼é€‰é¡¹ (JSON)
    output_video_quality VARCHAR(10),   -- è¾“å‡ºè§†é¢‘è´¨é‡
    preserve_original BOOLEAN,          -- æ˜¯å¦ä¿ç•™åŸå§‹æ–‡ä»¶
    original_file_size BIGINT,          -- åŸå§‹æ–‡ä»¶å¤§å°
    output_file_size BIGINT,            -- è¾“å‡ºæ–‡ä»¶å¤§å°
    
    progress FLOAT DEFAULT 0.0,         -- ä»»åŠ¡è¿›åº¦
    error_message TEXT,                 -- é”™è¯¯ä¿¡æ¯
    created_at TIMESTAMP DEFAULT NOW(),
    completed_at TIMESTAMP
);
```

#### system_settings (ç³»ç»Ÿè®¾ç½®è¡¨)
```sql
CREATE TABLE system_settings (
    key VARCHAR(100) PRIMARY KEY,
    value TEXT NOT NULL,
    description VARCHAR(500),
    category VARCHAR(50) DEFAULT 'general',
    updated_at TIMESTAMP DEFAULT NOW()
);
```

## å¼€å‘ç¯å¢ƒæ­å»º

### 1. ç¯å¢ƒè¦æ±‚

- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Node.js**: 16.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- **FFmpeg**: æœ€æ–°ç¨³å®šç‰ˆæœ¬
- **Git**: ç‰ˆæœ¬æ§åˆ¶å·¥å…·

### 2. åç«¯ç¯å¢ƒæ­å»º

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd backend
python -m venv venv
source venv/bin/activate  # Linux/Mac
# venv\Scripts\activate   # Windows

# 2. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½®å¿…è¦çš„é…ç½®

# 4. åˆå§‹åŒ–æ•°æ®åº“
python -c "from src.core.database import init_db; import asyncio; asyncio.run(init_db())"

# 5. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python main.py
# æˆ–è€…
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### 3. å‰ç«¯ç¯å¢ƒæ­å»º

```bash
# 1. å®‰è£…ä¾èµ–
cd frontend
npm install

# 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# 3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build
```

### 4. å¼€å‘é…ç½®

#### åç«¯é…ç½® (.env)
```env
# åŸºæœ¬é…ç½®
DEBUG=true
HOST=0.0.0.0
PORT=8000

# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///./data/avd.db

# AIæ¨¡å‹é…ç½®
WHISPER_MODEL_SIZE=base
WHISPER_DEVICE=cpu

# ç½‘ç»œé…ç½®
HTTP_PROXY=
HTTPS_PROXY=

# å®‰å…¨é…ç½®
SECRET_KEY=your-secret-key-here
```

### 5. å‰ç«¯APIå¼€å‘æŒ‡å— â­ v2.0.0

#### ä½¿ç”¨ç»Ÿä¸€APIå·¥å…·

**æ¨èç”¨æ³•**:
```typescript
import { apiGet, apiPost, API_ENDPOINTS } from '../utils/apiUtils';

// GETè¯·æ±‚ (è‡ªåŠ¨å¯ç”¨ç¼“å­˜)
const response = await apiGet(API_ENDPOINTS.SYSTEM.INFO);
if (response.success) {
  console.log(response.data);
}

// POSTè¯·æ±‚ (è‡ªåŠ¨é”™è¯¯å¤„ç†)
const result = await apiPost(API_ENDPOINTS.DOWNLOADS.RECORD, {
  url: 'https://example.com/video',
  quality: 'best'
});

// æ‰¹é‡è¯·æ±‚ (å¹¶å‘æ§åˆ¶)
const results = await apiBatch([
  { endpoint: API_ENDPOINTS.DOWNLOADS.PLATFORMS },
  { endpoint: API_ENDPOINTS.DOWNLOADS.QUALITY_OPTIONS }
]);
```

**é…ç½®é€‰é¡¹**:
```typescript
const response = await apiGet(API_ENDPOINTS.SYSTEM.INFO, {
  timeout: 15000,           // è¶…æ—¶æ—¶é—´
  retries: 5,              // é‡è¯•æ¬¡æ•°
  enableCache: true,       // å¯ç”¨ç¼“å­˜
  cacheDuration: 600,      // ç¼“å­˜æ—¶é—´(ç§’)
  showErrorNotification: false  // ç¦ç”¨é”™è¯¯é€šçŸ¥
});
```

#### é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

```typescript
import { useErrorHandler } from '../hooks/useErrorHandler';

const { showSuccess, showInfo, handleBusinessError } = useErrorHandler();

try {
  const result = await apiPost(API_ENDPOINTS.SUBTITLES.UPLOAD, formData);
  showSuccess('ä¸Šä¼ æˆåŠŸ', 'æ–‡ä»¶å·²ä¸Šä¼ åˆ°æœåŠ¡å™¨');
} catch (error) {
  handleBusinessError(error, 'æ–‡ä»¶ä¸Šä¼ å¤±è´¥');
}
```

#### ç½‘ç»œçŠ¶æ€ç›‘æ§

```typescript
import { setupNetworkMonitoring, preloadCriticalData } from '../utils/apiUtils';

// åœ¨åº”ç”¨å¯åŠ¨æ—¶è®¾ç½®
useEffect(() => {
  setupNetworkMonitoring();
  preloadCriticalData();
}, []);
```

#### å‰ç«¯é…ç½® (vite.config.ts)
```typescript
export default defineConfig({
  plugins: [react()],
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8000',
        changeOrigin: true,
      },
      '/ws': {
        target: 'ws://localhost:8000',
        ws: true,
      },
    },
  },
});
```

## éƒ¨ç½²æ–¹æ¡ˆ

### 1. å¼€å‘éƒ¨ç½²

**ä½¿ç”¨Docker Composeå¿«é€Ÿéƒ¨ç½²**:

```yaml
# docker-compose.yml
version: '3.8'
services:
  backend:
    build: 
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    volumes:
      - ./data:/app/data
    environment:
      - DATABASE_URL=sqlite:///data/avd.db
  
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:80"
    depends_on:
      - backend

  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
```

```bash
# éƒ¨ç½²å‘½ä»¤
docker-compose up -d
```

### 2. ç”Ÿäº§éƒ¨ç½²

#### åç«¯éƒ¨ç½² (systemd)

**åˆ›å»ºæœåŠ¡æ–‡ä»¶** `/etc/systemd/system/avd-web.service`:
```ini
[Unit]
Description=AVD Web Backend Service
After=network.target

[Service]
Type=exec
User=avd
WorkingDirectory=/opt/avd-web/backend
Environment=PATH=/opt/avd-web/backend/venv/bin
ExecStart=/opt/avd-web/backend/venv/bin/python main.py
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

```bash
# å¯ç”¨æœåŠ¡
sudo systemctl enable avd-web
sudo systemctl start avd-web
```

#### å‰ç«¯éƒ¨ç½² (Nginx)

**Nginxé…ç½®** `/etc/nginx/sites-available/avd-web`:
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    root /var/www/avd-web/frontend/dist;
    index index.html;
    
    # å‰ç«¯è·¯ç”±
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # APIä»£ç†
    location /api/ {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    
    # WebSocketä»£ç†
    location /ws {
        proxy_pass http://localhost:8000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
    
    # é™æ€æ–‡ä»¶ç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### 3. SSLé…ç½®

```bash
# ä½¿ç”¨Let's Encryptè·å–SSLè¯ä¹¦
sudo certbot --nginx -d your-domain.com
```

## æ€§èƒ½ä¼˜åŒ–

### 1. åç«¯ä¼˜åŒ–

- **å¼‚æ­¥å¤„ç†**: ä½¿ç”¨asyncioå¤„ç†å¹¶å‘è¯·æ±‚
- **æ•°æ®åº“è¿æ¥æ± **: SQLAlchemyè¿æ¥æ± ç®¡ç†
- **ç¼“å­˜ç­–ç•¥**: Redisç¼“å­˜é¢‘ç¹æŸ¥è¯¢æ•°æ®
- **æ–‡ä»¶æµå¼ä¼ è¾“**: å¤§æ–‡ä»¶åˆ†å—ä¼ è¾“
- **ä»»åŠ¡é˜Ÿåˆ—**: Celeryå¤„ç†é•¿æ—¶é—´ä»»åŠ¡

### 2. å‰ç«¯ä¼˜åŒ–

- **ä»£ç åˆ†å‰²**: React.lazyåŠ¨æ€å¯¼å…¥
- **è™šæ‹Ÿæ»šåŠ¨**: å¤§åˆ—è¡¨æ€§èƒ½ä¼˜åŒ–
- **ç¼“å­˜ç­–ç•¥**: APIå“åº”ç¼“å­˜
- **å‹ç¼©ä¼˜åŒ–**: Gzipå‹ç¼©é™æ€èµ„æº
- **CDNåŠ é€Ÿ**: é™æ€èµ„æºCDNåˆ†å‘

### 3. ç½‘ç»œä¼˜åŒ–

- **HTTP/2**: æ”¯æŒå¤šè·¯å¤ç”¨
- **WebSocketè¿æ¥å¤ç”¨**: å‡å°‘è¿æ¥å¼€é”€
- **å‹ç¼©ä¼ è¾“**: å¯ç”¨Gzip/Brotliå‹ç¼©
- **ç¼“å­˜ç­–ç•¥**: åˆç†è®¾ç½®ç¼“å­˜å¤´

## ç›‘æ§å’Œæ—¥å¿—

### 1. æ—¥å¿—ç³»ç»Ÿ

**ç»“æ„åŒ–æ—¥å¿—**:
```python
# ä½¿ç”¨loguruè¿›è¡Œç»“æ„åŒ–æ—¥å¿—
from loguru import logger

logger.add("logs/app.log", 
          rotation="1 day", 
          retention="30 days",
          format="{time} | {level} | {message}")
```

**æ—¥å¿—çº§åˆ«**:
- DEBUG: è°ƒè¯•ä¿¡æ¯
- INFO: ä¸€èˆ¬ä¿¡æ¯
- WARNING: è­¦å‘Šä¿¡æ¯
- ERROR: é”™è¯¯ä¿¡æ¯
- CRITICAL: ä¸¥é‡é”™è¯¯

### 2. ç›‘æ§æŒ‡æ ‡

**ç³»ç»ŸæŒ‡æ ‡**:
- CPUä½¿ç”¨ç‡
- å†…å­˜ä½¿ç”¨ç‡
- ç£ç›˜ä½¿ç”¨ç‡
- ç½‘ç»œæµé‡

**åº”ç”¨æŒ‡æ ‡**:
- ä¸‹è½½ä»»åŠ¡æ•°é‡
- ä¸‹è½½æˆåŠŸç‡
- å¹³å‡ä¸‹è½½é€Ÿåº¦
- WebSocketè¿æ¥æ•°

**é”™è¯¯ç›‘æ§**:
- å¼‚å¸¸å †æ ˆè·Ÿè¸ª
- é”™è¯¯é¢‘ç‡ç»Ÿè®¡
- æ€§èƒ½ç“¶é¢ˆåˆ†æ

### 3. å¥åº·æ£€æŸ¥

```python
@app.get("/health")
async def health_check():
    return {
        "status": "healthy",
        "timestamp": datetime.now().isoformat(),
        "version": "2.0.0",
        "database": await check_database_health(),
        "websocket": websocket_manager.get_connection_count()
    }
```

## å®‰å…¨è€ƒè™‘

### 1. è¾“å…¥éªŒè¯

- URLæ ¼å¼éªŒè¯
- æ–‡ä»¶ç±»å‹æ£€æŸ¥
- æ–‡ä»¶å¤§å°é™åˆ¶
- SQLæ³¨å…¥é˜²æŠ¤

### 2. è®¿é—®æ§åˆ¶

- APIé€Ÿç‡é™åˆ¶
- CORSé…ç½®
- æ–‡ä»¶è®¿é—®æƒé™
- ä¼šè¯ç®¡ç†

### 3. æ•°æ®ä¿æŠ¤

- æ•æ„Ÿä¿¡æ¯åŠ å¯†
- å®‰å…¨çš„Cookieè®¾ç½®
- HTTPSå¼ºåˆ¶è·³è½¬
- å®šæœŸå®‰å…¨æ›´æ–°

## æ‰©å±•åŠŸèƒ½

### 1. ç”¨æˆ·ç³»ç»Ÿ

- ç”¨æˆ·æ³¨å†Œç™»å½•
- ä¸‹è½½å†å²è®°å½•
- ä¸ªäººè®¾ç½®åŒæ­¥
- ä½¿ç”¨é…é¢ç®¡ç†

### 2. é«˜çº§åŠŸèƒ½

- æ‰¹é‡ä¸‹è½½
- å®šæ—¶ä¸‹è½½
- ä¸‹è½½é˜Ÿåˆ—ä¼˜å…ˆçº§
- è‡ªåŠ¨åˆ†ç±»å­˜å‚¨

### 3. æ’ä»¶ç³»ç»Ÿ

- è‡ªå®šä¹‰æå–å™¨
- ç¬¬ä¸‰æ–¹é›†æˆ
- å·¥ä½œæµè‡ªåŠ¨åŒ–
- APIæ‰©å±•æ¥å£

## æ•…éšœæ’é™¤

### 1. å¸¸è§é—®é¢˜

**ä¸‹è½½å¤±è´¥**:
- æ£€æŸ¥URLæœ‰æ•ˆæ€§
- éªŒè¯ç½‘ç»œè¿æ¥
- æ›´æ–°yt-dlpç‰ˆæœ¬
- æ£€æŸ¥Cookieæœ‰æ•ˆæ€§

**å­—å¹•ç”Ÿæˆå¤±è´¥**:
- æ£€æŸ¥AIæ¨¡å‹æ˜¯å¦ä¸‹è½½
- éªŒè¯éŸ³é¢‘æ–‡ä»¶æ ¼å¼
- æ£€æŸ¥ç³»ç»Ÿèµ„æºä½¿ç”¨

**WebSocketè¿æ¥å¤±è´¥**:
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- éªŒè¯ä»£ç†é…ç½®
- æ£€æŸ¥æµè§ˆå™¨æ”¯æŒ

### 2. æ—¥å¿—åˆ†æ

**æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—**:
```bash
# åç«¯æ—¥å¿—
tail -f backend/data/logs/app.log

# ç³»ç»ŸæœåŠ¡æ—¥å¿—
journalctl -u avd-web -f

# Nginxè®¿é—®æ—¥å¿—
tail -f /var/log/nginx/access.log
```

### 3. æ€§èƒ½è¯Šæ–­

**èµ„æºä½¿ç”¨ç›‘æ§**:
```bash
# CPUå’Œå†…å­˜ä½¿ç”¨
htop

# ç£ç›˜ä½¿ç”¨
df -h

# ç½‘ç»œè¿æ¥
netstat -an | grep :8000
```

## å¼€å‘è§„èŒƒ

### 1. ä»£ç è§„èŒƒ

**Pythonä»£ç **:
- ä½¿ç”¨Blackæ ¼å¼åŒ–
- éµå¾ªPEP 8è§„èŒƒ
- ç±»å‹æ³¨è§£å¿…é¡»
- æ–‡æ¡£å­—ç¬¦ä¸²å®Œæ•´

**TypeScriptä»£ç **:
- ä½¿ç”¨ESLintæ£€æŸ¥
- Prettieræ ¼å¼åŒ–
- ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- ç»„ä»¶æ–‡æ¡£æ³¨é‡Š

### 2. Gitè§„èŒƒ

**æäº¤ä¿¡æ¯æ ¼å¼**:
```
type(scope): description

feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºå·¥å…·
```

**åˆ†æ”¯ç­–ç•¥**:
- main: ä¸»åˆ†æ”¯
- develop: å¼€å‘åˆ†æ”¯
- feature/*: åŠŸèƒ½åˆ†æ”¯
- hotfix/*: çƒ­ä¿®å¤åˆ†æ”¯

### 3. æµ‹è¯•è§„èŒƒ

**å•å…ƒæµ‹è¯•**:
```python
# åç«¯æµ‹è¯•
pytest backend/tests/

# å‰ç«¯æµ‹è¯•
npm test
```

**APIæµ‹è¯•**:
```bash
# ä½¿ç”¨curlæµ‹è¯•API
curl -X POST http://localhost:8000/api/v1/downloads/info \
  -H "Content-Type: application/json" \
  -d '{"url": "https://www.youtube.com/watch?v=example"}'
```

## ç‰ˆæœ¬è®¡åˆ’

### v2.0.0 (å·²å®Œæˆ) âœ…
- âœ… åŸºç¡€Webç•Œé¢
- âœ… è§†é¢‘ä¸‹è½½åŠŸèƒ½
- âœ… å­—å¹•ç”ŸæˆåŠŸèƒ½  
- âœ… å­—å¹•çƒ§å½•åŠŸèƒ½
- âœ… æµå¼ä¸‹è½½åŠŸèƒ½ (ç›´æ¥ä¸‹è½½åˆ°å®¢æˆ·ç«¯)
- âœ… å‰ç«¯æ€§èƒ½ä¼˜åŒ– (æ‡’åŠ è½½ã€é”™è¯¯å¤„ç†)
- âœ… æ‰¹é‡ä¸‹è½½åŠŸèƒ½
- âœ… ç”¨æˆ·è®¾ç½®ç³»ç»Ÿ
- âœ… å®æ—¶è¿›åº¦æ¨é€
- âœ… **ç»Ÿä¸€APIç®¡ç†ç³»ç»Ÿ** (æ–°å¢)
- âœ… **æ™ºèƒ½ç¼“å­˜å’Œé‡è¯•æœºåˆ¶** (æ–°å¢)
- âœ… **åˆ†å±‚é”™è¯¯å¤„ç†** (æ–°å¢)
- âœ… **ç½‘ç»œçŠ¶æ€ç›‘æ§** (æ–°å¢)
- âœ… **ä¼˜é›…é™çº§ç­–ç•¥** (æ–°å¢)
- âœ… **å‰ç«¯ç»„ä»¶å…¨é¢é€‚é…** (8/8ç»„ä»¶)

### v2.1.0 (è®¡åˆ’ä¸­)
- ğŸ“‹ ç”¨æˆ·è®¤è¯ç³»ç»Ÿ

- ğŸ“‹ ç§»åŠ¨ç«¯é€‚é…ä¼˜åŒ–

### v2.2.0 (è§„åˆ’ä¸­)
- ğŸ“‹ æ’ä»¶ç³»ç»Ÿ
- ğŸ“‹ APIæœåŠ¡å¼€æ”¾
- ğŸ“‹ äº‘å­˜å‚¨é›†æˆ
- ğŸ“‹ åˆ†å¸ƒå¼éƒ¨ç½²æ”¯æŒ

## è´¡çŒ®æŒ‡å—

### 1. å‚ä¸æ–¹å¼

- ğŸ› æŠ¥å‘ŠBug
- ğŸ’¡ æå‡ºåŠŸèƒ½å»ºè®®
- ğŸ“ æ”¹è¿›æ–‡æ¡£
- ğŸ’» è´¡çŒ®ä»£ç 

### 2. å¼€å‘æµç¨‹

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. ç¼–å†™ä»£ç å’Œæµ‹è¯•
4. æäº¤Pull Request
5. ä»£ç å®¡æŸ¥
6. åˆå¹¶ä»£ç 

### 3. è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: [GitHub Repository]
- é—®é¢˜åé¦ˆ: [Issues]
- æŠ€æœ¯è®¨è®º: [Discussions]

---

## v2.0.0 æ¶æ„å‡çº§æ€»ç»“ ğŸš€

### é‡å¤§æ”¹è¿›

**å‰ç«¯æ¶æ„ç°ä»£åŒ–**:
- âœ… **ç»Ÿä¸€APIç®¡ç†**: é…ç½®åŒ–ç«¯ç‚¹ç®¡ç†ï¼Œå‘Šåˆ«ç¡¬ç¼–ç 
- âœ… **æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ**: 10åˆ†é’Ÿç³»ç»Ÿç¼“å­˜ + 30ç§’åŠ¨æ€ç¼“å­˜
- âœ… **åˆ†å±‚é”™è¯¯å¤„ç†**: API/ä¸šåŠ¡/UIä¸‰å±‚é”™è¯¯å¤„ç†æœºåˆ¶
- âœ… **ç½‘ç»œçŠ¶æ€ç›‘æ§**: å®æ—¶æ£€æµ‹ï¼Œæ–­çº¿è‡ªåŠ¨æ¢å¤
- âœ… **æ€§èƒ½ä¼˜åŒ–**: é‡è¯•æœºåˆ¶ã€æ‰¹é‡è¯·æ±‚ã€å¹¶å‘æ§åˆ¶
- âœ… **ç”¨æˆ·ä½“éªŒ**: å‹å¥½æç¤ºã€ä¼˜é›…é™çº§ã€æ— æ„ŸçŸ¥å‡çº§

**æŠ€æœ¯å€ºåŠ¡æ¸…ç†**:
- ğŸ§¹ ç§»é™¤27ä¸ªé‡å¤çš„APIåŸºç¡€URLå®šä¹‰
- ğŸ—ï¸ ç»Ÿä¸€8ä¸ªæ ¸å¿ƒç»„ä»¶çš„APIè°ƒç”¨æ–¹å¼
- ğŸ“¦ æ–°å¢2ä¸ªæ ¸å¿ƒåŸºç¡€è®¾æ–½æ–‡ä»¶
- ğŸ›¡ï¸ 100%ç»„ä»¶é”™è¯¯å¤„ç†è¦†ç›–
- âš¡ 3-5å€APIè°ƒç”¨æ€§èƒ½æå‡

**ç”Ÿäº§å°±ç»ª**:
- ğŸ¯ 11/11 APIç«¯ç‚¹æµ‹è¯•é€šè¿‡
- ğŸ”„ å‘åå…¼å®¹æ€§ä¿è¯
- ğŸ“š å®Œæ•´æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—
- ğŸš€ ç«‹å³å¯éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

### å¼€å‘è€…æ”¶ç›Š

**å¼€å‘æ•ˆç‡**:
- ğŸ“ æ–°å¢APIåªéœ€é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
- ğŸ”§ ç»Ÿä¸€é”™è¯¯å¤„ç†ï¼Œå‡å°‘é‡å¤ä»£ç 
- ğŸ› æ›´å¥½çš„è°ƒè¯•ä½“éªŒå’Œé”™è¯¯è¿½è¸ª
- ğŸ“Š å†…ç½®æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

**ç»´æŠ¤æ€§**:
- ğŸ—ï¸ æ¸…æ™°çš„æ¶æ„åˆ†å±‚
- ğŸ“‹ é…ç½®åŒ–ç®¡ç†
- ğŸ”„ æ˜“äºæ‰©å±•å’Œå‡çº§
- ğŸ§ª å®Œå–„çš„é™çº§ç­–ç•¥

---

**æ³¨æ„**: æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ä¸­ï¼Œå¦‚æœ‰ç–‘é—®è¯·æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

**v2.0.0 å‡çº§çŠ¶æ€**: âœ… **100%å®Œæˆï¼Œç”Ÿäº§å°±ç»ª**

### æ¶æ„è®¾è®¡

AVD Webç‰ˆæœ¬é‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Reactå‰ç«¯     â”‚â”€â”€â”€â”€â–¶â”‚   FastAPIåç«¯   â”‚â”€â”€â”€â”€â–¶â”‚    æ•°æ®åº“       â”‚
â”‚  (Ant Design)   â”‚     â”‚   (å¼‚æ­¥å¤„ç†)    â”‚     â”‚   (SQLite)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                        â”‚                        
        â”‚                        â”‚                        
        â–¼                        â–¼                        
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              
â”‚   WebSocket     â”‚     â”‚   ä¸‹è½½å™¨æ¨¡å—    â”‚              
â”‚  (å®æ—¶é€šä¿¡)     â”‚     â”‚   (æ¨¡å—åŒ–)      â”‚              
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              
```

#### æ¨¡å—åŒ–ä¸‹è½½å™¨æ¶æ„

ä¸‹è½½å™¨é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œæ”¯æŒçµæ´»æ‰©å±•å’Œå¹³å°ç‰¹å®šä¼˜åŒ–ï¼š

```
VideoDownloader (ä¸»æ¥å£)
    â”‚
    â”œâ”€â”€ DownloaderFactory (å·¥å‚ç±»)
    â”‚       â”‚
    â”‚       â”œâ”€â”€ å¹³å°æ£€æµ‹
    â”‚       â”œâ”€â”€ ä¸‹è½½å™¨é€‰æ‹©
    â”‚       â””â”€â”€ å®ä¾‹åˆ›å»º
    â”‚
    â””â”€â”€ BaseDownloader (æŠ½è±¡åŸºç±»)
            â”‚
            â”œâ”€â”€ YouTubeDownloader
            â”œâ”€â”€ BilibiliDownloader
            â”œâ”€â”€ DouyinDownloader
            â”œâ”€â”€ WeixinDownloader
            â”œâ”€â”€ XiaohongshuDownloader
            â”œâ”€â”€ QQDownloader
            â”œâ”€â”€ YoukuDownloader
            â”œâ”€â”€ IqiyiDownloader
            â””â”€â”€ GenericDownloader
```

**æ¶æ„ä¼˜åŠ¿**ï¼š
1. **å¯æ‰©å±•æ€§**ï¼šè½»æ¾æ·»åŠ æ–°å¹³å°æ”¯æŒ
2. **å¯ç»´æŠ¤æ€§**ï¼šæ¯ä¸ªå¹³å°ç‹¬ç«‹ç»´æŠ¤ï¼Œäº’ä¸å½±å“
3. **çµæ´»æ€§**ï¼šå¯ä»¥é’ˆå¯¹ç‰¹å®šå¹³å°è¿›è¡Œä¼˜åŒ–
4. **å‘åå…¼å®¹**ï¼šä¿æŒåŸæœ‰APIä¸å˜
5. **æ™ºèƒ½é€‰æ‹©**ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä½³ä¸‹è½½å™¨